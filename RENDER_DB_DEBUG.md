# Render Database Persistence Debugging Instructions

You've reported that your production database on Render was wiped out. This document outlines how to gather critical information to understand and resolve this issue.

**Please follow these steps very carefully:**

### Step 1: Verify Render Persistent Disk Configuration

1.  **Go to your Render Dashboard:**
    *   Open your web browser and log in to [https://dashboard.render.com/](https://dashboard.render.com/).

2.  **Navigate to your Web Service:**
    *   On your dashboard, click on your `fred-rehab-app` web service (or whatever you named it).

3.  **Go to the 'Disks' Section:**
    *   In the left sidebar for your service, click on the **'Disks'** link.

4.  **Confirm Disk is Attached:**
    *   You should see an attached persistent disk listed (likely named `rehab-data`).
    *   **Crucially, verify the 'Mount Path'.** It *must* be set to `/var/data`.
    *   **Please confirm this value:** Is the 'Mount Path' exactly `/var/data`?
    *   **Please also confirm its 'Size' and 'Type'** (e.g., '1 GB', 'Standard').

### Step 2: Verify Render Environment Variables

1.  **Go to the 'Environment' Section:**
    *   In the left sidebar for your service, click on the **'Environment'** link.

2.  **Confirm `DATABASE_PATH`:**
    *   You should have an environment variable named `DATABASE_PATH`.
    *   **Crucially, verify its 'Value'.** It *must* be set to `/var/data/rehab.db`.
    *   **Please confirm this value:** Is `DATABASE_PATH` set to `/var/data/rehab.db`?

3.  **Confirm `UPLOAD_PATH`:**
    *   You should also have an environment variable named `UPLOAD_PATH`.
    *   **Crucially, verify its 'Value'.** It *must* be set to `/var/data/uploads`.
    *   **Please confirm this value:** Is `UPLOAD_PATH` set to `/var/data/uploads`?

### Step 3: Check Render Deployment and Runtime Logs

The application logs will tell us exactly what database and upload paths your application is *actually* using on Render.

1.  **Go to the 'Deploys' Section:**
    *   In the left sidebar for your service, click on **'Deploys'**.

2.  **View the Latest Deployment Log:**
    *   Click on the **most recent deployment** in the list to view its logs.

3.  **Search for Database Connection Messages:**
    *   Look through these logs for lines containing:
        *   `Connected to the rehab database at ...`
        *   `Upload destination: ...`
    *   These messages are generated by your `index.js` file and will show the exact paths your application is attempting to use.

4.  **Copy and paste the relevant log output here.**
    *   **Please copy these specific lines (the "Connected to..." and "Upload destination:" messages)** and any other **error messages** (usually highlighted in red or marked as `ERROR`) you see in the deployment or runtime logs.

### Step 4: Confirm Data Entry in Production

1.  **Have you entered any new data (exercises/steps) *directly into the deployed Render application* (e.g., `https://fred-rehab.onrender.com`) *after* the Persistent Disk was set up and after your latest successful deployment?**
    *   This is important because if no data was ever entered into the persistent production database, it would naturally appear empty.

**Please provide the confirmations from Steps 1 and 2, the relevant log output from Step 3, and the answer to Step 4.** This information is critical to understand why your data was lost.
