# Render Deployment Debugging Instructions (Database Persistence)

This document outlines how to gather critical information to debug why your production database might be getting wiped out on Render.

**Please follow these steps very carefully:**

### Step 1: Verify Render Persistent Disk Configuration

1.  **Go to your Render Dashboard:**
    *   Open your web browser and log in to [https://dashboard.render.com/](https://dashboard.render.com/).

2.  **Navigate to your Web Service:**
    *   On your dashboard, click on your `fred-rehab-app` web service (or whatever you named it).

3.  **Go to the 'Disks' Section:**
    *   In the left sidebar for your service, click on the **'Disks'** link.

4.  **Confirm Disk is Attached:**
    *   You should see an attached persistent disk listed (likely named `rehab-data`).
    *   **Crucially, verify the 'Mount Path'.** It *must* be set to `/var/data`.
    *   Please make a note of this 'Mount Path' (e.g., `/var/data`).
    *   Also, make a note of its 'Size' and 'Type' (usually 'Standard').

### Step 2: Verify Render Environment Variables

1.  **Go to the 'Environment' Section:**
    *   In the left sidebar for your service, click on the **'Environment'** link.

2.  **Confirm `DATABASE_PATH`:**
    *   You should have an environment variable named `DATABASE_PATH`.
    *   **Crucially, verify its 'Value'.** It *must* be set to `/var/data/rehab.db`.
    *   Please make a note of this 'Value'.

3.  **Confirm `UPLOAD_PATH`:**
    *   You should also have an environment variable named `UPLOAD_PATH`.
    *   **Crucially, verify its 'Value'.** It *must* be set to `/var/data/uploads`.
    *   Please make a note of this 'Value'.

### Step 3: Check Render Deployment and Runtime Logs

The application logs will tell us exactly what database and upload paths your application is *actually* using on Render.

1.  **Go to the 'Deploys' Section:**
    *   In the left sidebar for your service, click on **'Deploys'**.

2.  **View the Latest Deployment Log:**
    *   Click on the **most recent deployment** in the list to view its logs.

3.  **Search for Database Connection Messages:**
    *   Look through these logs for lines containing:
        *   `Connected to the rehab database at ...`
        *   `Upload destination: ...`
    *   These messages are generated by your `index.js` file and will show the exact paths your application is attempting to use.

4.  **Copy and paste the relevant log output here.**
    *   **Please copy these specific lines (the "Connected to..." and "Upload destination:" messages)** and any other **error messages** (usually highlighted in red or marked as `ERROR`) you see in the deployment or runtime logs.

Please provide the confirmations from Step 1 and 2 (the exact Mount Path, DATABASE_PATH value, and UPLOAD_PATH value) and the relevant log output from Step 3. This information is critical to understand why your data was lost.
